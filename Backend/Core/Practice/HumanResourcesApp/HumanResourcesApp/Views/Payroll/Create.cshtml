@model Payroll


    @if (Model == null)
    {
        ViewData["ActionName"] = "Create";
    }
    else
    {
        ViewData["ActionName"] = "Edit";
    }

    <title>@ViewData["ActionName"] Payroll</title>

    <h2 class="mb-5">@ViewData["ActionName"] Payroll</h2>
    
            <form asp-action="@ViewData["ActionName"]" method="post">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <div class="mb-3">
                    <label asp-for="EmployeeID" class="form-label"></label>
                    <select class="form-control"
                            asp-for="EmployeeID"
                            asp-items="@ViewBag.EmployeesList">
                        <option value="">Select Employee</option>
                    </select>
                    <span class="text-danger" asp-validation-for="EmployeeID"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="BasicSalary"></label>
                    <input id="txtBasicSalaryId" class="form-control" asp-for="BasicSalary" type="number" onchange="CalcSalary()"/>
                    <span class="text-danger" asp-validation-for="BasicSalary"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="PayrollDate" class="form-label"></label>
                    <input class="form-control" type="date" asp-for="PayrollDate">
                    <span class="text-danger" asp-validation-for="PayrollDate"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Bonus" class="form-label"></label>
                    <input id="txtBonusId" class="form-control"  type="number"  asp-for="Bonus"
                               onchange="CalcSalary()">
                    <span class="text-danger" asp-validation-for="Bonus"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="SocialSecurityAmount" class="form-label"></label>
                    <input id="txtSsaId" class="form-control" type="number" 
                               asp-for="SocialSecurityAmount" onchange="CalcSalary()">
                    <span class="text-danger" asp-validation-for="SocialSecurityAmount"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="Leaves"></label>
                    <input id="txtLeavesId" class="form-control" type="number" asp-for="Leaves"
                               onchange="CalcSalary()"/>
                    <span class="text-danger" asp-validation-for="Leaves"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="NetSalary"></label>
                    <input 
                           id="txtNetSalaryId" class="form-control" 
                           type="number" asp-for="NetSalary"                    
                           readonly/>
                    <span class="text-danger" asp-validation-for="NetSalary"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="TS" class="form-label"></label>
                    <input class="form-control" type="date" asp-for="TS" readonly>
                    <span class="text-danger" asp-validation-for="TS"></span>
                </div>

                <div class="mb-5">
                    <label asp-for="CreatedBy" class="form-label"></label>

                    <input class="form-control" asp-for="CreatedBy" readonly />
                    <span class="text-danger" asp-validation-for="CreatedBy"></span>
                </div>

                <div class="mb-3">
                    @if (ViewData["ActionName"] == "Create")
                    {
                        <button class="btn btn-outline-info" type="submit">Add</button>
                    }
                    else
                    {
                        <button class="btn btn-outline-info" type="submit">Save</button>
                    }
                    <a class="btn btn-outline-danger"
                       asp-action="Index">
                        Cancel
                    </a>
                </div>
            </form>

@section Scripts {
    @{ 
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

<script>
    function CalcSalary()
    {
        var basicSalary = document.getElementById('txtBasicSalaryId').value;
        var bonus = document.getElementById('txtBonusId').value;
        var ssa = document.getElementById('txtSsaId').value;
        var leaves = document.getElementById('txtLeavesId').value;
        var leavesAmount = leaves * (basicSalary / 30 / 8);

        var netSalary = (+basicSalary) + (+bonus) - (+ssa) - (+leavesAmount);
        document.getElementById('txtNetSalaryId').value = netSalary;
    }


</script>



